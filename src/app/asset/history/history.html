<!-- History View -->
<navbar title="{{ vm.assetId }} History"></navbar>
<div class="history container-fluid px-4 py-3">
  <section class="mt-3 mb-4">
    <breadcrumb items="vm.breadcrumbItems" current="History"></breadcrumb>
  </section>
  <div class="row">
    <div class="col-sm-12">
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title">
            Trend
            <spinner ng-if="vm.loader"></spinner>
          </h5>
          <div class="form-group row">
            <div class="form-group col-md-3 col-sm-12">
              <div class="input-group date">
                <input
                  type="text"
                  class="form-control report__datetime-picker"
                  placeholder="MM/DD/YYYY HH:MM"
                  ng-model="vm.startTime"
                  datetime-picker
                  hour="23"
                  minute="59"
                  ng-disabled="vm.loader"
                />
              </div>
            </div>
            <div class="form-group col-md-3 col-sm-12">
              <div class="input-group date">
                <input
                  type="text"
                  class="form-control"
                  placeholder="MM/DD/YYYY HH:MM"
                  ng-model="vm.endTime"
                  datetime-picker
                  hour="23"
                  minute="59"
                  ng-disabled="vm.loader"
                />
              </div>
            </div>
            <div class="col">
              <button
                type="button"
                ng-disabled="vm.loader"
                ng-click="vm.dpForSingleTag(vm.startTime,vm.endTime)"
                class="btn btn-primary"
              >
                Update
              </button>
            </div>
          </div>
          <div
            ng-hide="vm.loader"
            id="container"
            class="incosa-animatable history__chart"
          ></div>
        </div>
      </div>
      <div class="card my-4">
        <div class="card-body">
          <h5 class="card-title">
            Tag Wise Historical data
            <spinner ng-if="vm.loader"></spinner>
          </h5>
          <div class="form-group row">
            <div class="form-group col-md-3 col-sm-12">
              <div class="input-group date">
                <input
                  type="text"
                  class="form-control report__datetime-picker"
                  placeholder="MM/DD/YYYY HH:MM"
                  ng-model="vm.startTime"
                  datetime-picker
                  hour="23"
                  minute="59"
                  ng-disabled="vm.loader"
                />
              </div>
            </div>
            <div class="form-group col-md-3 col-sm-12">
              <div class="input-group date">
                <input
                  type="text"
                  class="form-control"
                  placeholder="MM/DD/YYYY HH:MM"
                  ng-model="vm.endTime"
                  datetime-picker
                  hour="23"
                  minute="59"
                  ng-disabled="vm.loader"
                />
              </div>
            </div>
            <div class="col">
              <button
                type="button"
                ng-disabled="vm.loader"
                ng-click="vm.dpForSingleTag(vm.startTime, vm.endTime)"
                class="btn btn-primary"
              >
                Update
              </button>
              <!-- <button class="btn btn-secondary" export-to-csv>
                <i class="fa fa-file" aria-hidden="true"></i>
                Export to CSV
              </button> -->
            </div>
          </div>
          <div class="incosa-animatable table-responsive" ng-hide="vm.loader">
            <table class="table table-hover table-striped">
              <thead>
                <tr>
                  <th>Value</th>
                  <th>Timestamp</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  dir-paginate="datapoint in vm.datapointsForHistoryTable | itemsPerPage: 15"
                  pagination-id="history"
                >
                  <td>{{ datapoint[1] }}</td>
                  <td>{{ datapoint[0] | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
                </tr>
              </tbody>
            </table>
            <dir-pagination-controls
              pagination-id="history"
              max-size="15"
              direction-links="true"
              boundary-links="true"
            >
            </dir-pagination-controls>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
